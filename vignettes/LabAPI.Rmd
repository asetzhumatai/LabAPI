---
title: "LabAPI Package to Access the Kolada Database"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Using LabAPI to Access the Kolada Database}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(LabAPI)
```
Students: Aset Zhumatai, Pranjal Saha Arnab

## 1. Get KPI Metadata
```{r}
kpis <- kld_kpis(title = "Personalkostnader, kr/inv", per_page = 5)
kpis
```

## 2. Get municipality metadata
```{r}
munis <- kld_municipalities(per_page = 5)
munis
```

## 3. Get values for a KPI and municipality

retrieve population data (N00951) for Stockholm (0180) in 2020:

```{r}
df <- kld_values("N00951", "0180", 2020)
df
```

If you have a range of years implemented:

```{r}
df_multi <- kld_values("N00951", "0180", 2018:2021)
df_multi

```

## 4.Interactive Shiny Application

To interactively analyze the Kolada data using the LabAPI functions, a Shiny application is available on GitHub. This app allows searching for KPIs (using Swedish terms), selecting municipalities, choosing year ranges, and fetching data dynamically.
You can run the app directly from GitHub using the following command in R:

```{r, eval=FALSE}
shiny::runGitHub("Lab5_shiny","rnab09")
```
Note: The KPI search in the app requires at least 3 characters and uses Swedish titles from the Kolada API (e.g., "befolkning" for population-related metrics)
